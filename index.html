<!DOCTYPE html>
<html>

<head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width,initial-scale=1,user-scalable=0">
    <meta name="format-detection" content="telephone=no" />
    <title>h5-dev-mobile-guide-community</title>
</head>

<body>
    <div id="app"></div>
    <script src="./cordova.js?ver=md5"></script>
    <script src="./cordova_plugins.js?ver=md5"></script>
    <!-- built files will be auto injected -->
    <script>
        //兼容UC竖屏转横屏出现的BUG
       //自定义设计稿的宽度：designWidth
       //最大宽度:maxWidth
       //这段js的最后面有两个参数记得要设置，一个为设计稿实际宽度，一个为制作稿最大宽度，例如设计稿为750，最大宽度为750，则为(750,750)
       ;(function(designWidth, maxWidth) {
         var doc = document,
           win = window,
           docEl = doc.documentElement,
           remStyle = document.createElement("style"),
           tid;

         function refreshRem() {
           var width = docEl.getBoundingClientRect().width;
           maxWidth = maxWidth || 540;
           width>maxWidth && (width=maxWidth);
           var rem = width * 100 / designWidth;
           remStyle.innerHTML = 'html{font-size:' + rem + 'px;}';
         }

         if (docEl.firstElementChild) {
           docEl.firstElementChild.appendChild(remStyle);
         } else {
           var wrap = doc.createElement("div");
           wrap.appendChild(remStyle);
           doc.write(wrap.innerHTML);
           wrap = null;
         }
         //要等 wiewport 设置好后才能执行 refreshRem，不然 refreshRem 会执行2次；
         refreshRem();

         win.addEventListener("resize", function() {
           clearTimeout(tid); //防止执行两次
           tid = setTimeout(refreshRem, 300);
         }, false);

         win.addEventListener("pageshow", function(e) {
           if (e.persisted) { // 浏览器后退的时候重新计算
             clearTimeout(tid);
             tid = setTimeout(refreshRem, 300);
           }
         }, false);

         if (doc.readyState === "complete") {
           doc.body.style.fontSize = "14px";
         } else {
           doc.addEventListener("DOMContentLoaded", function(e) {
             doc.body.style.fontSize = "14px";
           }, false);
         }
       })(375, 750);
   </script>
</body>

</html>
